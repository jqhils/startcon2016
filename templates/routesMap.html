{% extends "header.html" %}
{% block title %}Title{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}
<div class = "titleBack">
	<div class="mainTitle">Eco </div> Transport</div>
	</div>
	<div>
		<div class="container-fluid">
			<div class = "row">
			</div>
		</div>
		<div id="map-canvas"></div>
	</div><br>
	<div class="selectModeTitle">
		Mode of Transport

	</div> <br>


<div ng-controller="myCtrl">
	<form class = "form-horizontal" role= "form">
			<select class="form-control" name="mode1" ng-model="mode1" style="width:45%; display:inline-block;" id="mode1">
				<option>Car</option>
				<option>Train</option>
				<option>Bus</option>
			</select>
			<select class="form-control" style="width:45%; display:inline-block;" name="mode2" ng-model="mode2" id="mode1">
				<option>Bus</option>
				<option>Train</option>
				<option>Car</option>
			</select><br>
	</form>
	<br>
	<div class="selectModeTitle">
		Sustainability
	</div>
	<div class="comparisonBgrd" style="background-color: rgba(0, 0, 0, 0.4)">
		<div class="row">
			<div style="text-align:center;" class="col-xs-6"><h2><span class="label label-default">Car 5 min</span></h2>
			<div class="row">
			<br><div style="float:center; padding-left:35%;">
					<div class="c100 p0 small orange">
						<span>0%</span>
						<div class="slice">
							<div class="bar"></div>
							<div class="fill"></div>
						</div>
					</div>
    			</div>
				<br>
				</div>
				<div class="row percentageStat">More efficient</div>
			</div>
		  	<div style="text-align:center; border-left: thin solid #009900;" class="col-xs-5"><h2>
			  <span class="label label-default">Bus 17 min</span></h2>
				<div class="row">
				<br><div  style="float:center; padding-left:30%;">
			  		<div class="c100 p32 small green">
					<span>32%</span>
						<div class="slice">
							<div class="bar"></div>
							<div class="fill"></div>
						</div>
					</div>
    				</div><br>
				</div>
				<div class="row percentageStat">More efficient</div>
			</div>
		</div>
	<br></div>
	<div style="text-align:center;background-color: rgba(0, 0, 0, 0.2)"><br>
		<h2><span class="label label-success">Trees to Plant</span></h2><br></div>
	<div class="comparisonBgrd" style="background-color: rgba(0, 0, 0, 0.2)">
		<div class="row">
				<div style="text-align:center;" class="col-xs-6">
				<div class="row">
				<br><div style="float:center; padding-left:5%;">
						 <span class="glyphicon glyphicon-tree-conifer"></span>
					 <span class="glyphicon glyphicon-tree-conifer"></span>
					 <span class="glyphicon glyphicon-tree-conifer"></span>
						<span class="glyphicon glyphicon-tree-conifer"></span>
					</div>
					<br>
					</div>
				</div>
				<div style="text-align:center; border-left: thin solid #009900;" class="col-xs-5">
					<div class="row">
					<br><div  style="float:center; padding-left:30%;">
						 <span class="glyphicon glyphicon-tree-conifer"></span></p>
						</div>
					</div>
				</div>
		</div>
	<br>
	</div>
	<div style="text-align:center;background-color: rgba(0, 0, 0, 0.4)"><br>
		<h2><span class="label label-danger">Emmissions Use</span></h2><br></div>
	<div class="comparisonBgrd" style="background-color: rgba(0, 0, 0, 0.4)">
		<div class="row">
				<div style="text-align:center; " class="col-xs-8">
				<div class="row">
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
	float: right;
	padding-left: 20px;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding-left: 20px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
</style>
<table align="right">
  <tr>
    <th style="width: 33%"></th>
    <th style="width: 33%">Car</th>
    <th style="width: 33%">Bus</th>
  </tr>
  <tr>
    <td>Fuel Consumption</td>
    <td>2.1 (L/100km)</td>
    <td>2.5 (L/100km)</td>
  </tr>
  <tr>
    <td>Energy Consumption</td>
    <td>182 (Wh/km)</td>
    <td>90 (Wh/km)</td>
  </tr>
  <tr>
    <td>Annual Fuel Cost</td>
    <td>$509</td>
    <td>$209</td>
  </tr>

</table>
		</div>
	<br>
	</div>

    <script src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyBPq_aC_7y3PA4Bim15wIhe8RFRguXEjzw">
    </script>

    <script>

        // Fetch coordinates from form
        var fromCoord = new google.maps.LatLng({{ dest['from'].latitude }}, {{ dest['from'].longitude }});
        var toCoord = new google.maps.LatLng({{ dest['to'].latitude }}, {{ dest['to'].longitude }});

        function initialize() {
            var directionsService = new google.maps.DirectionsService;
            var directionsDisplay = new google.maps.DirectionsRenderer;
            var mapOptions = {
                center: new google.maps.LatLng(-33.8698494, 151.1947438),
                zoom: 12,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

            directionsDisplay.setMap(null);

            directionsDisplay.setOptions({
                polylineOptions: {
                    strokeColor: 'red'
                }
            });
            directionsDisplay.setMap(map);

            function renderDirections(result, mode) {
                var polylineOptionsActual = new google.maps.Polyline({
                    strokeColor: '#FFFFFF',
                    strokeOpacity: 0.6,
                    strokeWeight: 5
                });

                if (mode == "DRIVING") {
                    polylineOptionsActual.strokeColor = '#008B8B';
                } else if (mode == "TRANSIT") {
                    polylineOptionsActual.strokeColor = '#D3143C';
                } else if (mode == "BUS") {
                    polylineOptionsActual.strokeColor = "#BC8F8F";
                }

                var directionsRenderer = new google.maps.DirectionsRenderer({polylineOptions: polylineOptionsActual});
                directionsRenderer.setMap(map);
                directionsRenderer.setDirections(result);
            }

            function requestDirections(start, end, mode) {
                if (mode == "DRIVING") {
                    directionsService.route({
                        origin: start,
                        destination: end,
                        travelMode: google.maps.DirectionsTravelMode.DRIVING
                    }, function(result) {
                        renderDirections(result, mode);
                    });
                } else if (mode == "TRANSIT") {
                    directionsService.route({
                        origin: start,
                        destination: end,
                        travelMode: google.maps.DirectionsTravelMode.TRANSIT
                    }, function(result) {
                        renderDirections(result, mode);
                    });
                } else if (mode == "BUS") {
                    directionsService.route({
                        origin: start,
                        destination: end,
                        travelMode: google.maps.DirectionsTravelMode.TRANSIT,
                        transitOptions: {
                            modes: ['BUS']
                        },
                    }, function(result) {
                        renderDirections(result, mode);
                    });
                }
            }

            requestDirections(fromCoord, toCoord, "DRIVING");
            requestDirections(fromCoord, toCoord, "TRANSIT");
            requestDirections(fromCoord, toCoord, "BUS");

        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
{% endblock %}
